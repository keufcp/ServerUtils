# ServerUtils

## Modの説明

ServerUtilsは，サーバーの状態を可視化するコマンド群に加え，運用を支援するさまざまな機能を提供するModです．

## コマンドの種類

| コマンド名      | 説明                                                                 | 権限レベル |
| --------------- | -------------------------------------------------------------------- | ---------- |
| `/suMobCap`     | サーバーのMobCap（モンスター上限）情報を表示します．                      | 設定による   |
| `/suMspt`       | サーバーの平均ティック時間 (MSPT) を表示します．                         | 2          |
| `/suReload`     | ServerUtilsの設定と言語リソースを再読み込みします．                      | 4          |
| `/suTps`        | サーバーのTPS (Ticks Per Second) を表示します．                          | 2          |
| `/uptime`       | サーバーの稼働時間を表示します．                                         | 設定による   |

### 権限レベルについて

コマンドの実行に必要な権限レベルは以下の通りです．

-   0: 全プレイヤー
-   1: モデレーター
-   2: ゲームマスター
-   3: 管理者
-   4: オーナー

### `/suMobCap` コマンドの詳細

`/suMobCap` コマンドは以下の形式で使用できます：

- `/suMobCap` - 全ディメンションのMobCap情報を表示
- `/suMobCap debug` - 全ディメンションの詳細なMobCap情報を表示（デバッグ情報含む）
- `/suMobCap <ディメンション>` - 指定ディメンションのMobCap情報を表示
- `/suMobCap <ディメンション> debug` - 指定ディメンションの詳細なMobCap情報を表示

**ディメンション指定について：**

以下の方法でディメンションを指定できます：

**エイリアス（短縮名）：**
- `o` または `overworld` - オーバーワールド
- `n` または `nether` - ネザー
- `e` または `end` - エンド

**完全なディメンションID：**
- `minecraft:overworld` - オーバーワールド
- `minecraft:the_nether` - ネザー
- `minecraft:the_end` - エンド

**その他：**
- MODで追加されたカスタムディメンションも完全なIDで指定可能
- エイリアスは大文字小文字を区別しません（完全IDは区別されます）
- TABキーで利用可能なディメンションの候補が表示されます

**表示される情報：**
- 通常モード：現在のMob数 / 最大Mob容量
- デバッグモード：ベース容量，アクティブチャンク数，最大スポーンチャンク数も表示

## configファイル (`serverutils.json`) の中身の説明

設定ファイルは `config/serverutils.json` に生成されます．

| 変数名                    | 値の例 (デフォルト) | 説明                                                                                                                               |
| ------------------------- | ------------------- | ---------------------------------------------------------------------------------------------------------------------------------- |
| `locale`                  | `"en_US"`           | Mod内で使用される言語を設定します．「en_US」(英語) または「ja_JP」(日本語) を指定できます．変更するとModの表示言語が変わります．日本語表示にする場合，環境によってはターミナルの文字コード設定 (例: UTF-8) が必要になることがあります． |
| `uptimePermissionLevel`   | `4`                 | `/uptime` コマンドの実行に必要な権限レベルを設定します．値の範囲は0から4です．詳細は上記の「権限レベルについて」を参照してください．                                   |
| `mobcapPermissionLevel`   | `4`                 | `/suMobCap` コマンドの実行に必要な権限レベルを設定します．値の範囲は0から4です．詳細は上記の「権限レベルについて」を参照してください．                                 |
| `enableColoredOutput`     | `true`              | プレイヤーに対する色付きテキスト出力を有効にするかどうかを設定します．`false` にするとプレーンテキストで出力されます．                                                    |
| `enableSendWebhook`       | `false`             | Webhook送信を有効にするかどうかを設定します．`true` にすると，設定されたURLにサーバー情報を送信します．                                                              |
| `webhookUrl`              | `""`                | Webhookの送信先URLを設定します．DiscordのWebhook URLなどを指定します．`enableSendWebhook` が `true` の場合にのみ使用されます．                               |
| `webhookCronExpression`   | `"0 0 0 * * ?"`     | Webhookを送信するタイミングをcron式で設定します．デフォルトは毎日午前0時です．`enableSendWebhook` が `true` の場合にのみ使用されます．                               |

## 依存関係

[Fabric API](https://modrinth.com/mod/fabric-api) が必要です．

## ライセンス

このModは [MIT License](LICENSE) の下で公開されています．

## 作者

keufcp
